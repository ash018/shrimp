{% extends "./public/dashboardBase.html" %}
{% load static %}

{% block main_content %}

    <div id="page-wrapper" class="gray-bg">

        {% include 'shrimpapp/public/CommonHeadBar.html' %}

        <style type="text/css">
        </style>

        <div class="row wrapper border-bottom white-bg page-heading">
            <div class="col-sm-4">
                <h2>List Weightment </h2>
                <ol class="breadcrumb">

                </ol>
            </div>
            <div class="col-sm-8">


            </div>
        </div>

        {% if Message|length > 0 %}
            <div class="alert alert-info">
                <strong>{{ Message }}</strong>
            </div>
        {% endif %}

        <div class="ibox-content m-b-sm border-bottom col-lg-12 col-md-12 col-sm-12">

            <div class="row">
                <div class="col-sm-2"></div>
            </div>

            <div class="wrapper wrapper-content animated fadeInRight ">

                <form class="form-horizontal col-lg-12 col-md-12 col-sm-12" method="post" enctype="multipart/form-data"
                      action="{% url 'SaveWeightment' %}">
                    {% csrf_token %}


                            <div class="row col-lg-6 col-md-6 col-sm-6">
                                <div class="form-group ">
                                    <label for="Machine">Choose Farmer</label>
                                    <select name="Farmer" class="form-control">{% for sType in farmerList %}
                                        <option value="{{ sType.Id }}">{{ sType.FarmerName }}--{{ sType.FarmerCode }}</option>{% endfor %}
                                    </select>
                                </div>
                             <div class="mt-2 col-md-12">
                             </div>
                                <div class="form-group ">
                                    <label for="SparepartsDate">From Date</label>
                                    <input type="text" name="FromDate" class="form-control" id="FromDate"/>
                                </div>
                            </div>


                            <div class="row col-lg-6 col-md-6 col-sm-6">
                                <div class="form-group ">
                                    <label for="Machine">Choose Supplier</label>
                                    <select name="Supplier" class="form-control">{% for sType in supplierList %}
                                        <option value="{{ sType.Id }}">{{ sType.SupplierName }}--{{ sType.SupplierCode }}</option>{% endfor %}
                                    </select>
                                </div>
                                <div class="mt-2 col-md-12">
                             </div>

                                <div class="form-group ">
                                    <label for="SparepartsDate">To Date</label>
                                    <input type="text" name="ToDate" class="form-control" id="ToDate"/>
                                </div>
                            </div>
                    <button type="submit" class="btn btn-primary block">Search</button>

                </form>

            <div class="col-lg-12 col-md-12 col-sm-12">
                    <label for="Machine">Weightment List</label>
                    <table id="AllPartsAdd" class=" table table-bordered">
                        <thead>
                        <tr>
                            <th>SL</th>
                            <th>Date</th>
                            <th>Farmer</th>
                            <th>Supplier</th>
                            <th>Is Qc Pass</th>
                            <th>Actions</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for us in weghtmentList %}
                        <tr id="Complain_{{ us.ComplainId }}">
                            <td>{{ forloop.counter }}</td>
                            <td> {{ us.WgDate }}</td>
                            <td> {{ us.FarmerId__FarmerCode }}</td>
                            <td> {{ us.SupplierId__SupplierCode }}</td>
                            <td> {{ us.IsQcPass }}</td>
                            <td>
                                <a href="{% url 'EditWeightment' %}?ComplainId={{ us.Id }} " class="btn btn-warning btn-block">View</a>
                             </td>
                        </tr>
                    {% endfor %}

                        </tbody>
                    </table>

            </div>

        </div>
    </div>
    <link href="{% static "assets/css/plugins/datapicker/datepicker3.css" %}" rel="stylesheet">
    <script src="{% static "assets/js/plugins/datapicker/bootstrap-datepicker.js" %}"></script>
    <script src="{% static "assets/js/plugins/fullcalendar/moment.min.js" %}"></script>
    <script src="{% static "assets/js/plugins/daterangepicker/daterangepicker.js" %}"></script>

    <script>
        window.CSRF_TOKEN = "{{ csrf_token }}";

        $(document).ready(function () {
            {#             $(".numeric").on("input", function(evt) {#}
            {#                var self = $(this);#}
            {#                   self.val(self.val().replace(/[^0-9\.]/g, ''));#}
            {#                   if ((evt.which != 46 || self.val().indexOf('.') != -1) && (evt.which < 48 || evt.which > 57))#}
            {#                   {#}
            {#                     evt.preventDefault();#}
            {#                   }#}
            {#             });#}

            $("table").on("input", "input.numeric", function (evt) {

                console.log("This is Input");
                var self = $(this);
                self.val(self.val().replace(/[^0-9\.]/g, ''));
                if ((evt.which != 46 || self.val().indexOf('.') != -1) && (evt.which < 48 || evt.which > 57)) {
                    evt.preventDefault();
                }
            });


            $("table").on("click", "input.RemoveRow", function () {
                $(this).parent().parent().remove();
            });

            $("#AddNewRow").click(function () {
                var ShrimpType = '';
                $("#ShrimpType option").each(function () {
                    ShrimpType = ShrimpType + '<option value="' + $(this).val() + '">' + $(this).html() + '</option>'
                });

                var ShrimpItem = '';
                $("#ShrimpItem option").each(function () {
                    ShrimpItem = ShrimpItem + '<option value="' + $(this).val() + '">' + $(this).html() + '</option>'
                });

                var tableRow = '<tr>' +
                    '<td><select name="Weightment" class="form-control ">' + ShrimpType +
                    '</select></td>' +
                    '<td><input name="Weightment" class="form-control numeric" required="required" value=""/></td>' +
                    '<td><select name="Weightment" class="form-control ">' + ShrimpItem +
                    '</select></td>' +
                    '<td><select name="Weightment" class="form-control "><option value="Kg">Kg</option><option value="lb">lb</option></select></td>' +
                    '<td><input name="Weightment"  class="form-control numeric" required="required" value=""/></td>' +
                    '<td><input name="Weightment"  class="form-control numeric" required="required" value=""/></td>' +
                    '<td><input name="Weightment" class="form-control" required="required" value="N/A"/></td>' +
                    '<td><input type="button" class="btn btn-danger btn-block RemoveRow"  value="Remove"></td>' +
                    '</tr>';

                $("#AllPartsAdd").prepend(tableRow);
                return false;
            });

            $('.i-checks').iCheck({
                checkboxClass: 'icheckbox_square-green',
                radioClass: 'iradio_square-green',
            });

            $('.document_updatedate').datepicker({
                autoclose: true,
                format: "yyyy-mm-dd",
                todayBtn: true,
                calendarWeeks: true,
                autoclose: true,
                todayHighlight: true,
                toggleActive: true
            });

            $('#SparepartsDate').datepicker({
                autoclose: true,
                format: "yyyy-mm-dd",
                todayBtn: true,
                calendarWeeks: true,
                autoclose: true,
                todayHighlight: true,
                toggleActive: true
            });
            $('#FromDate').datepicker({
                autoclose: true,
                format: "yyyy-mm-dd",
                todayBtn: true,
                calendarWeeks: true,
                autoclose: true,
                todayHighlight: true,
                toggleActive: true
            });

            $('#ToDate').datepicker({
                autoclose: true,
                format: "yyyy-mm-dd",
                todayBtn: true,
                calendarWeeks: true,
                autoclose: true,
                todayHighlight: true,
                toggleActive: true
            });

        });
    </script>

{% endblock %}